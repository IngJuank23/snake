:root{
  --bg:#0a0a0a;
  --panel:#121212;
  --border:#14ff00;
  --text:#e6ffe6;
  --muted:#00ff00;
  --muted2:#7aff7a;

  /* móvil */
  --g:10px;
  --pad-size:64px;
  --brand:#20ff45;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
}

/* ======= Layout escritorio ======= */
.app{
  display:grid;
  grid-template-columns:320px 1fr;
  gap:16px;
  padding:16px;
  height:100%;
}
.sidebar{
  background:var(--panel);
  border:2px solid var(--border);
  border-radius:12px;
  padding:16px;
  display:grid;
  grid-template-rows:auto auto 1fr auto;
  gap:12px;
}
.sidebar h1{ margin:0 0 4px 0; color:var(--muted); }

.card{
  border:1px solid var(--border);
  border-radius:10px;
  padding:12px;
}
.card h2{ margin:0 0 10px 0; color:var(--muted); font-size:16px; }

label,.field{ display:block; margin:8px 0; }
.options{ display:flex; gap:10px; flex-wrap:wrap; }
.options.column{ flex-direction:column; }

input[type="text"],input[type="range"]{
  width:100%;
  background:#0f0f0f;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:8px;
}

.buttons{ display:flex; gap:8px; margin-top:10px; }
button{
  background:var(--muted);
  border:1px solid var(--border);
  color:#001000;
  padding:8px 10px;
  border-radius:10px;
  cursor:pointer;
  font-weight:700;
}
button.secondary{ background:#1b1b1b; color:var(--muted2); }

.tabs{ display:flex; gap:8px; margin-bottom:8px; }
.tab{
  background:#1b1b1b; color:var(--muted2);
  border:1px solid var(--border);
  padding:6px 10px; border-radius:8px;
}
.tab.active{ background:var(--muted); color:#001000; }

.leaderboard{ list-style:none; padding-left:0; margin:0; }
.leaderboard li{
  display:flex; justify-content:space-between;
  padding:4px 2px; border-bottom:1px dashed #1f521b;
}

.stage-wrap{
  display:grid; place-items:center;
  border:2px solid var(--border);
  border-radius:12px;
  padding:10px;              /* leve padding en desktop */
  position:relative;
}
#stage{
  background:linear-gradient(#0f0f0f,#0f0f0f) padding-box,
             linear-gradient(transparent,transparent) border-box;
  border:2px solid var(--border);
  border-radius:8px;
}
.overlay{
  position:absolute; inset:0;
  display:grid; place-items:center;
  pointer-events:none;
  color:var(--muted2); font-weight:700; font-size:22px;
  text-align:center; padding:12px;
}
.overlay .box{
  background:rgba(0,0,0,.6);
  border:1px solid var(--border);
  padding:12px 18px; border-radius:10px;
}

/* ======= D‑pad: oculto por defecto (escritorio) ======= */
#pad{ display:none; }

/* ================================================================== */
/* ======================   MÓVIL / TABLET   ========================= */
/* ================================================================== */
@media (max-width:900px){

  /* La app se apila en columna */
  .app{ display:block; padding:0 0 var(--g); }

  .sidebar{
    max-width:none;
    margin:var(--g);
  }

 .stage-wrap{
  margin: var(--g);
  /* empuja el canvas hacia arriba para que no lo tape el D‑pad */
  margin-bottom: calc(var(--pad-size) * 2.8 + 28px);
  position: relative;
 }
    /* deja hueco al pad para que no tape el canvas */
    scroll-margin-bottom:calc(var(--pad-size) + 48px);
  }

  /* Canvas fluido; mantiene 1:1 */
  #stage{
    width:100% !important;
    height:auto !important;
    max-width:100% !important;
    display:block;
    aspect-ratio:1/1;
  }

  /* Overlay más compacto */
  .overlay .box{
    max-width:92vw;
    padding:10px 14px;
    font-size:14px;
    line-height:1.35;
    border:1px solid rgba(32,255,69,.35);
    background:rgba(0,0,0,.55);
    border-radius:10px;
    backdrop-filter:blur(2px);
  }

  /* Botones principales touch‑friendly */
  .buttons button{ min-height:44px; font-size:16px; }

  /* Leaderboard con altura acotada */
  .leaderboard{ max-height:200px; overflow:auto; }

  /* ===== D‑pad fijo, centrado abajo ===== */
  #pad{
    position:fixed;
    left:50%;
    transform:translateX(-50%);
    bottom:calc(env(safe-area-inset-bottom, 0px) + 12px);
    z-index:50;

    display:grid;
    grid-template-columns:var(--pad-size) var(--pad-size) var(--pad-size);
    grid-template-rows:var(--pad-size) var(--pad-size) var(--pad-size);
    gap:8px;
    align-items:center;
    justify-items:center;

    padding:8px;
    border-radius:16px;
    background:rgba(0,0,0,.35);
    border:1px solid rgba(32,255,69,.25);
    backdrop-filter:blur(3px);
  }

  /* Para que los botones dentro de .pad-row se comporten como hijos del grid */
  #pad > .pad-row{ display:contents; }

  /* Posiciones en la cuadricula 3×3 */
  .pad-btn[data-dir="up"]{    grid-column:2; grid-row:1; }
  .pad-btn[data-dir="left"]{  grid-column:1; grid-row:2; }
  #pad-pause{                  grid-column:2; grid-row:2; }  /* centro */
  .pad-btn[data-dir="right"]{ grid-column:3; grid-row:2; }
  .pad-btn[data-dir="down"]{  grid-column:2; grid-row:3; }

  .pad-btn{
    width:var(--pad-size);
    height:var(--pad-size);
    border-radius:14px;
    border:2px solid var(--brand);
    color:var(--brand);
    background:rgba(0,0,0,.55);
    font-size:22px;
    display:grid; place-items:center;
    line-height:1;
    touch-action:manipulation;
  }

  /* Asegura que puedas desplazar la página para separar canvas y pad */
  body{ padding-bottom:calc(var(--pad-size) + 56px); }
}

/* MOSTRAR el D‑pad también en pantallas táctiles grandes (p.ej. tablets) */
@media (pointer:coarse) and (max-width:1200px){
  #pad{ display:grid; }
}

/* ===== Escritorio (>= 901px) ===== */
@media (min-width: 900px){
  /* Oculta el D‑pad en escritorio grande (estaba en 901)*/
  #pad{ display:none; }

  /* El contenedor del juego no debe estirarse de más */
  .stage-wrap{
    display: inline-grid;   /* se ajusta al tamaño del canvas */
    max-width: 950px;       /* ~ 800 de canvas + bordes/márgenes(estaba en 840) */
    margin: 0 auto;         /* centrado en su columna */
  }

  /* El canvas nunca excede 800 px en desktop lo baje a width: 90% estaba en 100*/
  #stage{
    max-width: 900px;
    width: 100%;
    height: auto;
  }
}
